# This configuration file was auto-generated by the Puppet configuration
# management system.  Any changes you make to this file will be overwritten
# the next time Puppet runs.  Please make configuration changes to this
# service in Puppet.

<% if @when != '' %>when = <%= @when %><% end -%>

# Name of the file to save, minus extension, defaults to fqdn
backupname = <% if @backupname %><%= @backupname %><% else %><%= @fqdn %><% end %>

# compress = < compress | gzip | bzip | xz | none > (default = gzip)
compress = <% if @compress %><%= @compress %><% else %>gzip<% end %>

# backupdir = <dir> (default: /var/backups/tar)
# where to dump the backups.
backupdir = <%= @backupdir %>

# A few notes about includes and excludes:
# 1. include, exclude and vsinclude statements support globbing with '*'
# 2. Symlinks are not dereferenced. Moreover, an include line whose path
#    contains, at any level, a symlink to a directory, will only have the
#    symlink backed-up, not the target directory's content. Yes, you have to
#    dereference yourself the symlinks, or to use 'mount --bind' instead.
#    Example: let's say /home is a symlink to /mnt/crypt/home ; the following
#    line will only backup a "/home" symlink ; neither /home/user nor
#    /home/user/Mail will be backed-up :
#      include = /home/user/Mail
#    A workaround is to 'mount --bind /mnt/crypt/home /home' ; another one is to
#    write :
#      include = /mnt/crypt/home/user/Mail
# 3. All the excludes come after all the includes. The order is not otherwise
#    taken into account.

# files to include in the backup
<% @include.each do |include| -%>
include = <%= include %>
<% end -%>

# files to exclude from the backup
<% @exclude.each do |exclude| -%>
exclude = <%= exclude %>
<% end -%>

# tar binary - have to be GNU tar
#TAR=/bin/tar
#DATE           /bin/date
#DATEFORMAT     "%Y.%m.%d-%H%M"
